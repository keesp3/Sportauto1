const autoData = [
  {
    id: 1,
    marca: "Dacia",
    modello: "Duster",
    carburante: "Benzina/GPL",
    prezzo: "5.200€",
    img: [
      "duster1.jpg",
      "duster2.jpg",
      "duster3.jpg",
      "duster4.jpg",
      "duster5.jpg",
      "duster6.jpg",
      "duster7.jpg",
      "duster8.jpg",
      "duster9.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2015  
Cilindrata: 1.6   
Alimentazione: Benzina/GPL  
Cavalli: 105 CV  
Potenza: 77 kW  
Cambio: Manuale  
Chilometraggio: 235.000 km  
Prezzo: 5.200 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Cerchi in lega  
- Doppia chiave  
- Specchietti elettrici  
- Fari automatici  
- Sensori di parcheggio posteriori  
- Climatizzatore anteriore  
- Stereo CD di serie / AUX / USB / Bluetooth  
- Computer di bordo  
- Comandi al volante  
- Sedili regolabili  
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
  {
    id: 2,
    marca: "Hyundai",
    modello: "i10",
    carburante: "Benzina/GPL",
    prezzo: "2.200€",
    img: [
      "i10_1.jpg",
      "i10_2.jpg",
      "i10_3.jpg",
      "i10_4.jpg",
      "i10_5.jpg",
      "i10_6.jpg",
      "i10_7.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2010  
Cilindrata: 1.1   
Cavalli: 65 CV  
Potenza: 48,5 kW  
Alimentazione: Benzina/GPL  
Provenienza: Nord Italia  
Chilometraggio: 195.000 km  
Cambio: Manuale  
Ottima per neopatentati  
Prezzo: 2.200 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Block Shaft  
- Specchietti elettrici  
- Climatizzatore  
- Stereo CD di serie  
- Computer di bordo  
- Doppia chiave  
- Sedili regolabili  
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
  {
    id: 3,
    marca: "Fiat",
    modello: "500 Cabrio",
    carburante: "Benzina/GPL",
    prezzo: "5.650€",
    img: [
      "500c1.jpg",
      "500c2.jpg",
      "500c3.jpg",
      "500c4.jpg",
      "500c5.jpg",
      "500c6.jpg",
      "500c7.jpg",
      "500c8.jpg",
      "500c9.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2013  
Cilindrata: 1.2 
Cavalli: 69 CV  
Potenza: 51 kW  
Alimentazione: Benzina/GPL  
Provenienza: Nord Italia  
Chilometraggio: 188.000 km  
Cambio: Manuale  
Ottima per neopatentati  
Prezzo: 5.650 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Sensori di parcheggio posteriori
-Capote automatica
-city
- Specchietti elettrici  
- Climatizzatore  
- Stereo CD di serie  
- Computer di bordo  
- Doppia chiave  
- Sedili regolabili  
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
  {
    id: 4,
    marca: "Renault",
    modello: "Clio",
    carburante: "Benzina",
    prezzo: "2.100€",
    img: [
      "clio1.jpg",
      "clio2.jpg",
      "clio3.jpg",
      "clio4.jpg",
      "clio5.jpg",
      "clio6.jpg",
      "clio7.jpg",
      "clio8.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2005
Cilindrata: 1.2 
Cavalli: 75 CV  
Potenza: 55 kW  
Alimentazione: Benzina
Provenienza: Nord Italia  
Chilometraggio: 275.000 km  
Cambio: Manuale  
Ottima per neopatentati  
Prezzo: 2.100 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Specchietti elettrici  
- Climatizzatore  
- Stereo CD   
- Computer di bordo  
- Doppia chiave  
- Sedili regolabili  
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
  {
    id: 5,
    marca: "Dacia",
    modello: "Duster",
    carburante: "Diesel",
    prezzo: "4.500€",
    img: [
      "dusterbianca1.jpg",
      "dusterbianca2.jpg",
      "dusterbianca3.jpg",
      "dusterbianca4.jpg",
      "dusterbianca5.jpg",
      "dusterbianca6.jpg",
      "dusterbianca7.jpg",
      "dusterbianca8.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2011
Cilindrata: 1.5  
Alimentazione: Diesel
Cavalli: 107 CV  
Potenza: 78 kW  
Cambio: Manuale  
Chilometraggio: 198.000 km tagliandata a 196.000 km
Prezzo: 4.500 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Cerchi in lega  
- Doppia chiave  
- Specchietti elettrici  
- Climatizzatore anteriore  
- Stereo CD di serie / AUX / USB / Bluetooth  
- Computer di bordo  
- Comandi al volante  
- Sedili regolabili  
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
    {
    id: 6,
    marca: "Fiat",
    modello: "Punto Evo",
    carburante: "Benzina/Metano",
    prezzo: "2.800€",
    img: [
      "evobianca1.jpg",
      "evobianca2.jpg",
      "evobianca3.jpg",
      "evobianca4.jpg",
      "evobianca5.jpg",
      "evobianca6.jpg",
      "evobianca7.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2014
Cilindrata: 1.4  
Alimentazione: Benzina/Metano
Cavalli: 77 CV  
Potenza: 57 kW  
Cambio: Manuale  
Chilometraggio: 270.000 km
Prezzo: 2.800 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Cerchi in lega  
- Doppia chiave  
- Specchietti elettrici  
- Climatizzatore anteriore  
- Stereo CD  / AUX / USB 
- Computer di bordo  
- Comandi al volante  
- Sedili regolabili  
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
   {
    id: 7,
    marca: "Citroen",
    modello: "C3 Picasso",
    carburante: "Benzina",
    prezzo: "3.300€",
    img: [
      "picasso1.jpg",
      "picasso2.jpg",
      "picasso3.jpg",
      "picasso4.jpg",
      "picasso5.jpg",
      "picasso6.jpg",
      "picasso7.jpg",
      "picasso8.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2009
Cilindrata: 1.6 
Alimentazione: Benzina
Cavalli: 120 CV  
Potenza: 88 kW  
Cambio: Manuale  
Chilometraggio: 155.000 km
Prezzo: 3.300 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Cerchi in lega diamantati
- Sensori di parcheggio 
- Barre portapacchi
- Doppia chiave  
- Specchietti elettrici  
- Climatizzatore Bzone
- Stereo CD di serie 
- Computer di bordo  
- Comandi al volante  
- Sedili regolabili  
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
  {
    id: 8,
    marca: "Fiat",
    modello: "Panda",
    carburante: "Benzina/Metano",
    prezzo: "2.350€",
    img: [
      "pandablu1.jpg",
      "pandablu2.jpg",
      "pandablu3.jpg",
      "pandablu4.jpg",
      "pandablu5.jpg",
      "pandablu6.jpg",
      "pandablu7.jpg",
      "pandablu8.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2012
Cilindrata: 1.4
Alimentazione: Benzina/Metano
Cavalli: 77 CV  
Potenza: 57 kW  
Cambio: Manuale  
Chilometraggio: 345.000 km
Prezzo: 2.350 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Doppia chiave  
- Specchietti elettrici  
- Climatizzatore 
- Stereo CD 
- Computer di bordo  
- Sedili regolabili  
- City
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
  {
    id: 9,
    marca: "Fiat",
    modello: "Panda",
    carburante: "Benzina/Metano",
    prezzo: "4.550€",
    img: [
      "pandamarrone1.jpg",
      "pandamarrone2.jpg",
      "pandamarrone3.jpg",
      "pandamarrone4.jpg",
      "pandamarrone5.jpg",
      "pandamarrone6.jpg",
      "pandamarrone7.jpg",
      "pandamarrone8.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2013
Cilindrata: 900
Alimentazione: Benzina/Metano
Cavalli: 84 CV  
Potenza: 62 kW  
Cambio: Manuale  
Chilometraggio: 160.000 km
Prezzo: 4.550 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Doppia chiave  
- Specchietti elettrici  
- Climatizzatore 
- Stereo CD di serie
- Computer di bordo  
- Sedili regolabili  
- City
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
  {
    id: 10,
    marca: "Opel",
    modello: "Zafira 7 posti",
    carburante: "Benzina/Metano",
    prezzo: "3.600€",
    img: [
      "zafira1.jpg",
      "zafira2.jpg",
      "zafira3.jpg",
      "zafira4.jpg",
      "zafira5.jpg",
      "zafira6.jpg",
      "zafira7.jpg",
      "zafira8.jpg",
      "zafira9.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2013
Cilindrata: 1.6
Alimentazione: Benzina/Metano
Cavalli: 150 CV  
Potenza: 110 kW  
Cambio: Manuale  
Chilometraggio: 250.000 km
Prezzo: 3.600 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Fendinebbia  
- Doppia chiave  
- Specchietti elettrici  
- Climatizzatore 
- Stereo CD di serie
- Computer di bordo  
- Sedili regolabili  
- Sensori di parcheggio posteriori
- Poggia braccia
- Cerchi in lega
- Barre portapacchi
- ABS  
- ESP  
- Idroguida  
- Vetri elettrici`
  },
  {
    id: 11,
    marca: "Opel",
    modello: "Grandland X",
    carburante: "Diesel",
    prezzo: "10.000€",
    img: [
      "grandland1.jpg",
      "grandland2.jpg",
      "grandland3.jpg",
      "grandland4.jpg",
      "grandland5.jpg",
      "grandland6.jpg",
      "grandland7.jpg",
      "grandland8.jpg",
      "grandland9.jpg"
    ],
    descrizione: `Anno di immatricolazione: 2018
Cilindrata: 1.5
Alimentazione: Diesel
Cavalli: 130 CV  
Potenza: 96 kW  
Cambio: Manuale  
Chilometraggio: 240.000 km
Prezzo: 10.000 EURO (escluso il passaggio)

DOTAZIONE:
- Chiusure centralizzate  
- Specchietti elettrici richiudubuli con regolazione angolo morto automatico
- Doppia keyless
- Fendinebbia 
- Climatizzatore elettronico
- Stereo CD di serie 2 din con android auto ed apple carplay e ingresso bluetooth, aux, usb.
- Computer di bordo  
- Navigatore
- Sedili regolabili  
- Sensori di parcheggio posteriori e anteriori
- Poggia braccia
- Cerchi in lega da 18
- Retrocamera posteriore
- Vetri privacy
- Tergicristalli automatici
- Luci automatiche 
- Specchietto retrovisore oscurante automatico
- Cruise control 
- Rilevatore limite di velocità
- Bagagliaio posteriore automatico con doppio fondo
- ABS  
- START & STOP
- ESP  
- Fari diurni a led
- Idroguida  
- 4 Vetri elettrici`
  }
  // Altre auto possono essere aggiunte qui...
];

const autoList = document.getElementById("auto-list");
const dettagliAuto = document.getElementById("dettagli-auto");

function mostraAuto() {
  autoList.innerHTML = "";
  autoData.forEach(auto => {
    const card = document.createElement("div");
    card.classList.add("auto-card");
    card.setAttribute("tabindex", "0");
    card.innerHTML = `
      <img src="${auto.img[0]}" alt="${auto.marca} ${auto.modello}" />
      <h3>${auto.marca} ${auto.modello}</h3>
      <p>${auto.prezzo}</p>
    `;
    card.addEventListener("click", () => mostraDettagli(auto));
    card.addEventListener("keypress", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        mostraDettagli(auto);
      }
    });
    autoList.appendChild(card);
  });
}

function mostraDettagli(auto) {
  // Rimuovo la classe selected da tutte le card
  document.querySelectorAll(".auto-card").forEach(c => c.classList.remove("selected"));
  
  // Trovo la card selezionata e aggiungo la classe selected
  const cards = [...document.querySelectorAll(".auto-card")];
  const selectedCard = cards.find(card => card.querySelector("h3").textContent === `${auto.marca} ${auto.modello}`);
  if (selectedCard) selectedCard.classList.add("selected");

  let currentImgIndex = 0;

  dettagliAuto.style.display = "block";
  dettagliAuto.innerHTML = `
    <div id="carosello" style="position: relative; max-width: 100%; margin-bottom: 15px;">
      <img id="img-carosello" src="${auto.img[currentImgIndex]}" alt="${auto.marca} ${auto.modello}" style="width: 100%; border-radius: 8px;" />
      <button id="prev-btn" aria-label="Immagine precedente" style="position: absolute; top: 50%; left: 10px; transform: translateY(-50%); background: rgba(211,47,47,0.7); border:none; color:white; font-size: 24px; cursor: pointer; border-radius: 50%; width: 40px; height: 40px;">&#10094;</button>
      <button id="next-btn" aria-label="Immagine successiva" style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%); background: rgba(211,47,47,0.7); border:none; color:white; font-size: 24px; cursor: pointer; border-radius: 50%; width: 40px; height: 40px;">&#10095;</button>
    </div>
    <h2>${auto.marca} ${auto.modello}</h2>
    <p><strong>Carburante:</strong> ${auto.carburante}</p>
    <p><strong>Prezzo:</strong> ${auto.prezzo}</p>
    <p style="white-space: pre-line;">${auto.descrizione}</p>
  `;

  const imgElement = document.getElementById("img-carosello");
  const prevBtn = document.getElementById("prev-btn");
  const nextBtn = document.getElementById("next-btn");

  function cambiaImg(index) {
    currentImgIndex = (index + auto.img.length) % auto.img.length;
    imgElement.src = auto.img[currentImgIndex];
    imgElement.alt = `${auto.marca} ${auto.modello} - immagine ${currentImgIndex + 1}`;
  }

  // Uso onclick per evitare accumulo listener
  prevBtn.onclick = () => cambiaImg(currentImgIndex - 1);
  nextBtn.onclick = () => cambiaImg(currentImgIndex + 1);

  dettagliAuto.focus();
}

document.addEventListener("DOMContentLoaded", () => {
  mostraAuto();
});
